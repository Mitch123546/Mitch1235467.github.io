<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Endless Color Shuffle</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="wrapper">
    <header class="intro">
      <h1>Endless Color Shuffle</h1>
      <p>Enjoy a living mosaic of 10,000 tiles, each refreshing to a new hue every fraction of a second.</p>
    </header>
    <div class="grid" id="color-grid" role="grid" aria-label="Endlessly animating color grid"></div>
  </main>
  <script>
    const GRID_SIZE = 100;
    const MIN_DELAY = 10; // 0.01 seconds
    const MAX_DELAY = 1000; // 1 second

    const grid = document.getElementById('color-grid');
    grid.style.setProperty('--grid-size', GRID_SIZE);

    function randomColor() {
      const hue = Math.floor(Math.random() * 360);
      const saturation = 60 + Math.random() * 40; // 60% - 100%
      const lightness = 40 + Math.random() * 30; // 40% - 70%
      return `hsl(${hue} ${saturation}% ${lightness}%)`;
    }

    function scheduleColorUpdate(cell) {
      const delay = Math.random() * (MAX_DELAY - MIN_DELAY) + MIN_DELAY;
      setTimeout(() => {
        cell.style.backgroundColor = randomColor();
        scheduleColorUpdate(cell);
      }, delay);
    }

    const fragment = document.createDocumentFragment();
    for (let i = 0; i < GRID_SIZE * GRID_SIZE; i += 1) {
      const cell = document.createElement('div');
      cell.className = 'cell';
      fragment.appendChild(cell);
    }

    grid.appendChild(fragment);

    const cells = Array.from(grid.children);
    cells.forEach(cell => {
      cell.style.backgroundColor = randomColor();
      scheduleColorUpdate(cell);
    });
  </script>
</body>
</html>
